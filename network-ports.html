<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 2.0.18">
<link rel="icon" type="image/png" href="images/icons/OliveTinLogo.png">
<title>OliveTin documentation</title>
<style>
body {
  font-family: sans-serif;
  line-height: 1.5;
  padding: 0;
  margin: 0;
  display: grid;
  grid-template-areas: "nav content" "nav footer";
  grid-template-columns: 20em auto;
  grid-template-rows: auto min-content;
  height: 100vh;
  align-items: stretch;
}

a {
  text-decoration: none;
}

a:focus {
  background-color: #bdb76b;
}

#header {
  background-color: #efefef;
  grid-area: nav;
}

#footer {
  grid-area: footer;
  justify-self: center;
  align-self: end;
  padding: 1em;
}

#toc {
  padding: 1em;
}

#toc a {
  color: black;
}

#toc li {
  padding-bottom: .6em;
}

#toc ul {
  list-style: none;
  margin: 0;
  padding: 0;
}

#toc ul ul {
  padding-left: 1.4em;
}

#toctitle {
  font-weight: bold;
  color: black;
}

h1 {
  font-size: 1.4em;
  font-weight: lighter;
  background-color: black;
  padding: .6em;
  margin: 0;
  color: white;
}

#toc a:hover {
  text-decoration: underline;
}

#content {
  background-color: white;
  grid-area: content;
  max-width: 1000px;
  padding: 1em;
  justify-self: center;
}

#content img {
  max-width: 100%;
  vertical-align: middle;
}

pre {
  background-color: #f7f7f8;
  padding: 1em;
  word-wrap: break-word;
  white-space: pre-wrap;
}

table {
  border-collapse: collapse;
}

td, th {
  border: 1px solid gray;
  padding: .4em;
}

th {
  background-color: #f9f9f9;
  text-align: left;
}

.imageblock.right {
  float: right;
}

hr {
  clear: both;
  border: 0;
  border-bottom: 1px solid #efefef;
  margin: 1em;
}

div.admonitionblock td {
  border: 0;
}

div.admonitionblock td:first-child {
  font-weight: bold;
}

.listingblock .title {
  background-color: #efefef;
  margin-bottom: -1em;
  padding: 1em;
}

@media (max-width: 700px) {
  body {
    display: block;
  }
}

</style>
<style>.toc-current{font-weight: bold;} .toc-root{font-family: "Open Sans","DejaVu Sans",sans-serif;
                       font-size: 0.9em;} #content{display: flex; flex-direction: column; flex: 1 1 auto;}
             .nav-footer{text-align: center; margin-top: auto;}
             .nav-footer > p > a {white-space: nowrap;}</style>
</head>
<body id="network-ports" class="book toc2 toc-left">
<div id="header">
<h1>OliveTin</h1>
<div id="toc" class="toc2">
<div id="toctitle">Table of Contents</div>
<p><span class="toc-root"><a href="index.html">OliveTin documentation</a></span></p><ul class="sectlevel1">
<li><a href="installation.html">1. Installation</a>
</li>
<li><a href="config.html">2. Configuration</a>
</li>
<li><a href="reverse-proxies.html">3. Reverse Proxies</a>
</li>
<li><a href="actions.html">4. Actions</a>
</li>
<li><a href="action-customisation.html">5. Action customisation</a>
</li>
<li><a href="args.html">6. Arguments</a>
</li>
<li><a href="auth.html">7. Authentication &amp; Authorization</a>
</li>
<li><a href="_reference.html">8. Reference</a>
<ul class="sectlevel2">
<li><a href="network-ports.html"><span class="toc-current">8.1. Network ports</span></a>
</li>
<li><a href="_security.html">8.2. Security</a>
</li>
<li><a href="_understanding_exit_codes.html">8.3. Understanding exit codes</a>
</li>
<li><a href="update-tracking.html">8.4. Update Checks (and tracking)</a>
</li>
<li><a href="container-dnf.html">8.5. Installing extra container packages</a>
</li>
<li><a href="multi-inst.html">8.6. Multiple instances on a server</a>
</li>
</ul>
</li>
<li><a href="troubleshooting.html">9. Support &amp; Troubleshooting</a>
</li>
<li><a href="api.html">10. API</a>
</li>
</ul>
</div>
</div>
<div id="content">
<div class="sect2">
<h3 id="network-ports"><a class="anchor" href="#network-ports"></a><a class="link" href="#network-ports">8.1. Network ports</a></h3>
<div class="paragraph">
<p>OliveTin might suprise some people when they see it is listening on several
ports when it starts up. Most of these ports are internal and localhost-only by
default. It keeps the architecture of OliveTin clean and simple, and allows for
a lot of flexibility if needed.</p>
</div>
<div class="paragraph">
<p>Here is the default flow of traffic in OliveTin without any config changes.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/portDiagram.png" alt="portDiagram">
</div>
<div class="title">Figure 5. Flow of an inbound network request</div>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Traffic comes into OliveTin over your network and hits the only port
listening - 1337, which listens on all interfaces. This is a micro HTTP reverse
proxy.</p>
</li>
<li>
<p>Traffic for <code>/</code> gets proxied to <code>localhost:1340</code> for the static web
server.</p>
</li>
<li>
<p>Traffic for <code>/api/</code> gets proxied to <code>localhost:1338</code> for REST actions.</p>
</li>
<li>
<p>The REST API actually makes gRPC API calls internally, to port
<code>localhost:1339</code>.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Below is a detailed reference table.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 2. Port reference table</caption>
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 66.6667%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Config file reference (and Default Address:Port)</th>
<th class="tableblock halign-left valign-top">Purpose</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>listenAddressSingleHTTPFrontend: 0.0.0.0:1337</code> (listen on all available addresses)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">This is a "micro reverse proxy" built into OliveTin. It&#8217;s only purpose is to serve /ui and / (the web interface) from a single endpoint. This means that problems like CORSs and setting "external addresses" is not necessary. It does not do any caching or anything else. It can be disabled, but it makes life a lot easier for you. It&#8217;s common to put your own reverse proxy like haproxy, traefik, etc in front of this single micro reverse proxy.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>listenAddressRestActions: localhost:1338</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">REST - the protocol used by web pages to talk to web APIs. In the case of OliveTin, the API is used to get actions, and start actions.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>listenAddressGrpcActions:localhost:1339</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">gRPC - a very popular method of service-to-service API communication. This provides the "real" API for OliveTin.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>listenAddressWebUI: localhost:1340</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Hosts a simple static web server with some HTML, stylesheets, Javascript etc for the web interface.</p></td>
</tr>
</tbody>
</table>
<div class="sect3">
<h4 id="_see_also"><a class="anchor" href="#_see_also"></a><a class="link" href="#_see_also">8.1.1. See also</a></h4>
<div class="ulist">
<ul>
<li>
<p><a href="multi-inst.html">Running Multiple instances of OliveTin on the same server</a></p>
</li>
</ul>
</div>
</div>
</div>
<div class="paragraph nav-footer">
<p>↑ Up: <a href="_reference.html">Reference</a> | ⌂ Home: <a href="index.html">OliveTin documentation</a> | Next: <a href="_security.html">Security</a> →</p>
</div>
</div>
<div id="footer">
<div id="footer-text">
Last updated 2023-03-20 13:19:33 UTC
</div>
</div>
</body>
</html>