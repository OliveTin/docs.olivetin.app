<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 2.0.23">
<link rel="icon" type="image/png" href="images/icons/OliveTinLogo.png">
<title>OliveTin documentation</title>
<style>
body {
  font-family: sans-serif;
  line-height: 1.5;
  padding: 0;
  margin: 0;
  display: grid;
  grid-template-areas: "nav content" "nav footer";
  grid-template-columns: 20em auto;
  grid-template-rows: auto min-content;
  height: 100vh;
  align-items: stretch;
}

a {
  text-decoration: none;
  color: #36f;
  font-weight: bold;
}

a:focus, #toc a:focus {
  background-color: black;
  color: white;
}

a:visited {
  color: #36f;
  font-weight: bold;
}

a:hover {
  text-decoration: underline;
}

#header {
  background-color: #fafafa;
  grid-area: nav;
  box-shadow: 0 0 10px rgba(0, 0, 0, .4);
}

#footer {
  grid-area: footer;
  justify-self: center;
  align-self: end;
  padding: 1em;
}

#toc {
  padding: 1em;
}

#toc a {
  color: black;
  font-weight: normal;
}

#toc li {
  padding-bottom: .6em;
}

#toc ul {
  list-style: none;
  margin: 0;
  padding: 0;
}

#toc ul ul {
  padding-left: 1.4em;
}

#toctitle {
  font-weight: bold;
  color: black;
}

#content ul {
  list-style: '\25b9    ';
}

h1 {
  font-size: 1.4em;
  font-weight: lighter;
  background-color: black;
  padding: .6em;
  margin: 0;
  color: white;
}

#toc a:hover {
  text-decoration: underline;
}

#content {
  background-color: white;
  grid-area: content;
  max-width: 1000px;
  padding: 1em;
  justify-self: center;
}

#content img {
  max-width: 100%;
  vertical-align: middle;
}

code {
  background-color: #f7f7f8;
}

pre {
  background-color: #f7f7f8;
  padding: 1em;
  word-wrap: break-word;
  white-space: no-wrap;
  overflow: auto;
}

table {
  border-collapse: collapse;
}

td, th {
  border: 1px solid gray;
  padding: .4em;
}

th {
  background-color: #f9f9f9;
  text-align: left;
}

.imageblock {
  float: center;
}

.imageblock.right {
  float: right;
}

.imageblock .title {
  margin-bottom: 2em;
}

.imageblock img {
  border-radius: 1em;
  box-shadow: 0 0 10px rgba(0, 0, 0, 0.4);
}

.imageblock.right img {
  box-shadow: none;
}


.listingblock {
  box-shadow: 0 0 10px rgba(0, 0, 0, 0.4);
  border-radius: 1em;
}

.listingblock .title {
  border-radius: 1em 1em 0 0;
}

.listingblock .title ~ .content, .listingblock .title ~ .content pre {
  border-radius: 0 0 1em 1em;
}

.listingblock .content, .listingblock .content pre {
  border-radius: 1em;
}

hr {
  clear: both;
  border: 0;
  border-bottom: 1px solid #efefef;
  margin: 1em;
}

div.admonitionblock.note {
  background-color: beige;
}

div.admonitionblock td {
  border: 0;
}

div.admonitionblock td:first-child {
  font-weight: bold;
}

.listingblock .title {
  background-color: #efefef;
  margin-bottom: -1em;
  padding: 1em;
}

.red {
  color: white;
  border: 1px solid black;
  padding: .2em;
  font-weight: bold;
  background-color: #cc0000;
}

.red a {
  color: white;
}

@media (max-width: 700px) {
  body {
    display: block;
  }
}


</style>
<style>
pre.rouge table td { padding: 5px; }
pre.rouge table pre { margin: 0; }
pre.rouge, pre.rouge .w {
  color: #24292f;
  background-color: #f6f8fa;
}
pre.rouge .k, pre.rouge .kd, pre.rouge .kn, pre.rouge .kp, pre.rouge .kr, pre.rouge .kt, pre.rouge .kv {
  color: #cf222e;
}
pre.rouge .gr {
  color: #f6f8fa;
}
pre.rouge .gd {
  color: #82071e;
  background-color: #ffebe9;
}
pre.rouge .nb {
  color: #953800;
}
pre.rouge .nc {
  color: #953800;
}
pre.rouge .no {
  color: #953800;
}
pre.rouge .nn {
  color: #953800;
}
pre.rouge .sr {
  color: #116329;
}
pre.rouge .na {
  color: #116329;
}
pre.rouge .nt {
  color: #116329;
}
pre.rouge .gi {
  color: #116329;
  background-color: #dafbe1;
}
pre.rouge .ges {
  font-weight: bold;
  font-style: italic;
}
pre.rouge .kc {
  color: #0550ae;
}
pre.rouge .l, pre.rouge .ld, pre.rouge .m, pre.rouge .mb, pre.rouge .mf, pre.rouge .mh, pre.rouge .mi, pre.rouge .il, pre.rouge .mo, pre.rouge .mx {
  color: #0550ae;
}
pre.rouge .sb {
  color: #0550ae;
}
pre.rouge .bp {
  color: #0550ae;
}
pre.rouge .ne {
  color: #0550ae;
}
pre.rouge .nl {
  color: #0550ae;
}
pre.rouge .py {
  color: #0550ae;
}
pre.rouge .nv, pre.rouge .vc, pre.rouge .vg, pre.rouge .vi, pre.rouge .vm {
  color: #0550ae;
}
pre.rouge .o, pre.rouge .ow {
  color: #0550ae;
}
pre.rouge .gh {
  color: #0550ae;
  font-weight: bold;
}
pre.rouge .gu {
  color: #0550ae;
  font-weight: bold;
}
pre.rouge .s, pre.rouge .sa, pre.rouge .sc, pre.rouge .dl, pre.rouge .sd, pre.rouge .s2, pre.rouge .se, pre.rouge .sh, pre.rouge .sx, pre.rouge .s1, pre.rouge .ss {
  color: #0a3069;
}
pre.rouge .nd {
  color: #8250df;
}
pre.rouge .nf, pre.rouge .fm {
  color: #8250df;
}
pre.rouge .err {
  color: #f6f8fa;
  background-color: #82071e;
}
pre.rouge .c, pre.rouge .ch, pre.rouge .cd, pre.rouge .cm, pre.rouge .cp, pre.rouge .cpf, pre.rouge .c1, pre.rouge .cs {
  color: #6e7781;
}
pre.rouge .gl {
  color: #6e7781;
}
pre.rouge .gt {
  color: #6e7781;
}
pre.rouge .ni {
  color: #24292f;
}
pre.rouge .si {
  color: #24292f;
}
pre.rouge .ge {
  color: #24292f;
  font-style: italic;
}
pre.rouge .gs {
  color: #24292f;
  font-weight: bold;
}
</style>
<style>.toc-current{font-weight: bold;} .toc-root{font-family: "Open Sans","DejaVu Sans",sans-serif;
                       font-size: 0.9em;} #content{display: flex; flex-direction: column; flex: 1 1 auto;}
             .nav-footer{text-align: center; margin-top: auto;}
             .nav-footer > p > a {white-space: nowrap;}</style>
</head>
<body id="hass" class="book toc2 toc-left">
<div id="header">
<h1>OliveTin</h1>
<div id="toc" class="toc2">
<div id="toctitle">Table of Contents</div>
<p><span class="toc-root"><a href="index.html">OliveTin documentation</a></span></p><ul class="sectlevel1">
<li><a href="installation.html">Installation Guide</a>
</li>
<li><a href="config.html">Configuration</a>
</li>
<li><a href="reverse-proxies.html">Reverse Proxies</a>
</li>
<li><a href="actions.html">Action execution</a>
</li>
<li><a href="action-customisation.html">Action customisation</a>
</li>
<li><a href="examples.html">Action examples</a>
</li>
<li><a href="args.html">Arguments</a>
</li>
<li><a href="dashboards.html">Dashboards</a>
</li>
<li><a href="entities.html">Entities</a>
</li>
<li><a href="_integrations.html">Integrations</a>
<ul class="sectlevel2">
<li><a href="hass.html"><span class="toc-current">Home Assistant</span></a>
</li>
</ul>
</li>
<li><a href="auth.html">Security</a>
</li>
<li><a href="solutions.html">Solutions</a>
</li>
<li><a href="_advanced_configuration.html">Advanced Configuration</a>
</li>
<li><a href="_reference.html">Reference</a>
</li>
<li><a href="troubleshooting.html">Support &amp; Troubleshooting</a>
</li>
<li><a href="api.html">API</a>
</li>
</ul>
</div>
</div>
<div id="content">
<div class="sect2">
<h3 id="hass"><a class="anchor" href="#hass"></a><a class="link" href="#hass">Home Assistant</a></h3>
<div class="paragraph">
<p>Home Assistant is able to call REST API endpoints, making integration with OliveTin possible without any custom plugins or integrations in Home Assistant. This does require modifying your Home Assistant configuration.yml file though.</p>
</div>
<div class="sect3">
<h4 id="_give_you_actions_an_id"><a class="anchor" href="#_give_you_actions_an_id"></a><a class="link" href="#_give_you_actions_an_id">Give you actions an ID</a></h4>
<div class="paragraph">
<p>First, you need to give your actions an ID. This is done by adding an <code>id</code> field to your action. This ID will be used by Home Assistant to call the correct action. Here is an example of an action with an ID:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="yaml"><span class="na">actions</span><span class="pi">:</span>
  <span class="pi">-</span> <span class="na">id</span><span class="pi">:</span> <span class="s2">"</span><span class="s">server_sleep"</span>
    <span class="na">title</span><span class="pi">:</span> <span class="s2">"</span><span class="s">Server</span><span class="nv"> </span><span class="s">Sleep</span>
    <span class="s">icon:</span><span class="nv"> </span><span class="s">ping</span>
    <span class="s">shell:</span><span class="nv"> </span><span class="s">ssh</span><span class="nv"> </span><span class="s">user@server</span><span class="nv"> </span><span class="s">"sudo systemctl suspend"</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>You then need to know the URL to call to trigger this action. This URL is the OliveTin API URL, with the action ID appended to it. For example, if your OliveTin is running at <code><a href="http://yourserver:1337" class="bare">http://yourserver:1337</a></code>, the URL to call to trigger the action above would be <code><a href="http://yourserver:1337/api/StartActionAndWait/server_sleep" class="bare">http://yourserver:1337/api/StartActionAndWait/server_sleep</a></code>.</p>
</div>
<div class="paragraph">
<p>You can learn more about starting actions via the OliveTin API by reading the link <a href="api-start-action.html">Starting Actions via the API</a> page, but the method "StartActionAndWait" is the one you will want to use for Home Assistant.</p>
</div>
</div>
<div class="sect3">
<h4 id="_add_the_rest_api_call_to_home_assistant"><a class="anchor" href="#_add_the_rest_api_call_to_home_assistant"></a><a class="link" href="#_add_the_rest_api_call_to_home_assistant">Add the REST API call to Home Assistant</a></h4>
<div class="paragraph">
<p>Now that you have the URL to call to trigger your action, you can add this to your Home Assistant configuration. This is done by adding a <code>rest_command</code> to your configuration.yml file.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="https://www.home-assistant.io/docs/configuration/">Home Assistant Configuration</a></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>That page assumes you will use the Home Assistant File Editor addon to edit your configuration.yaml. Install it from the Home Assistant addon store if you have not done so already;</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/hassFileEditor.png" alt="hassFileEditor">
</div>
</div>
<div class="paragraph">
<p>The addon is started and added to the sidebar;</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/hassFileEditorConfig.png" alt="hassFileEditorConfig">
</div>
</div>
<div class="paragraph">
<p>Here is an example of a <code>rest_command</code> that calls the action above:</p>
</div>
<div class="paragraph">
<p>From the file editor now in your sidebar, browse the filesystem to the configuration.yaml file and add the following to the file:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="yaml"><span class="na">rest_command</span><span class="pi">:</span>
  <span class="na">olivetin_sleep_mindstorm</span><span class="pi">:</span>
    <span class="na">url</span><span class="pi">:</span> <span class="s">http://olivetin.webapps.teratan.lan/api/StartActionByGetAndWait/server_sleep</span>
    <span class="na">method</span><span class="pi">:</span> <span class="s">get</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>You save the file, and restart Home Assistant to pick up the changes.</p>
</div>
</div>
<div class="sect3">
<h4 id="_add_a_button_to_your_hass_dashboard"><a class="anchor" href="#_add_a_button_to_your_hass_dashboard"></a><a class="link" href="#_add_a_button_to_your_hass_dashboard">Add a button to your HASS Dashboard</a></h4>
<div class="paragraph">
<p>Now that you have a <code>rest_command</code> set up to call your action, you can add a button to your Home Assistant dashboard to trigger the action. This is done by adding a <code>button</code> to your dashboard configuration.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/hassButtonSetup.png" alt="hassButtonSetup">
</div>
</div>
<div class="paragraph">
<p>Set the "Tap Action" to "Call Service" and select the <code>rest_command</code> you created earlier. You can also set the icon and name of the button to whatever you like.</p>
</div>
<div class="paragraph">
<p>Good luck!</p>
</div>
</div>
</div>
<div class="paragraph nav-footer">
<p>↑ Up: <a href="_integrations.html">Integrations</a> | ⌂ Home: <a href="index.html">OliveTin documentation</a> | Next: <a href="auth.html">Security</a> →</p>
</div>
</div>
<div id="footer">
<div id="footer-text">
Last updated 2024-11-24 20:48:06 UTC
</div>
</div>
</body>
</html>