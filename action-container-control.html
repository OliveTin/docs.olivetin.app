<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 2.0.21">
<link rel="icon" type="image/png" href="images/icons/OliveTinLogo.png">
<title>OliveTin documentation</title>
<style>
body {
  font-family: sans-serif;
  line-height: 1.5;
  padding: 0;
  margin: 0;
  display: grid;
  grid-template-areas: "nav content" "nav footer";
  grid-template-columns: 20em auto;
  grid-template-rows: auto min-content;
  height: 100vh;
  align-items: stretch;
}

a {
  text-decoration: none;
}

a:focus {
  background-color: #bdb76b;
}

#header {
  background-color: #efefef;
  grid-area: nav;
}

#footer {
  grid-area: footer;
  justify-self: center;
  align-self: end;
  padding: 1em;
}

#toc {
  padding: 1em;
}

#toc a {
  color: black;
}

#toc li {
  padding-bottom: .6em;
}

#toc ul {
  list-style: none;
  margin: 0;
  padding: 0;
}

#toc ul ul {
  padding-left: 1.4em;
}

#toctitle {
  font-weight: bold;
  color: black;
}

h1 {
  font-size: 1.4em;
  font-weight: lighter;
  background-color: black;
  padding: .6em;
  margin: 0;
  color: white;
}

#toc a:hover {
  text-decoration: underline;
}

#content {
  background-color: white;
  grid-area: content;
  max-width: 1000px;
  padding: 1em;
  justify-self: center;
}

#content img {
  max-width: 100%;
  vertical-align: middle;
}

pre {
  background-color: #f7f7f8;
  padding: 1em;
  word-wrap: break-word;
  white-space: no-wrap;
  overflow: auto;
}

table {
  border-collapse: collapse;
}

td, th {
  border: 1px solid gray;
  padding: .4em;
}

th {
  background-color: #f9f9f9;
  text-align: left;
}

.imageblock.right {
  float: right;
}

hr {
  clear: both;
  border: 0;
  border-bottom: 1px solid #efefef;
  margin: 1em;
}

div.admonitionblock.note {
  background-color: beige;
}

div.admonitionblock td {
  border: 0;
}

div.admonitionblock td:first-child {
  font-weight: bold;
}

.listingblock .title {
  background-color: #efefef;
  margin-bottom: -1em;
  padding: 1em;
}

@media (max-width: 700px) {
  body {
    display: block;
  }
}

</style>
<style>.toc-current{font-weight: bold;} .toc-root{font-family: "Open Sans","DejaVu Sans",sans-serif;
                       font-size: 0.9em;} #content{display: flex; flex-direction: column; flex: 1 1 auto;}
             .nav-footer{text-align: center; margin-top: auto;}
             .nav-footer > p > a {white-space: nowrap;}</style>
</head>
<body id="action-container-control" class="book toc2 toc-left">
<div id="header">
<h1>OliveTin</h1>
<div id="toc" class="toc2">
<div id="toctitle">Table of Contents</div>
<p><span class="toc-root"><a href="index.html">OliveTin documentation</a></span></p><ul class="sectlevel1">
<li><a href="installation.html">1. Installation Guide</a>
</li>
<li><a href="config.html">2. Configuration</a>
</li>
<li><a href="reverse-proxies.html">3. Reverse Proxies</a>
</li>
<li><a href="actions.html">4. Actions</a>
</li>
<li><a href="action-customisation.html">5. Action customisation</a>
</li>
<li><a href="examples.html">6. Action examples</a>
<ul class="sectlevel2">
<li><a href="action-container-control.html"><span class="toc-current">6.1. Containers - start/stop</span></a>
</li>
<li><a href="action-service.html">6.2. Restart a systemd service</a>
</li>
<li><a href="action-ping.html">6.3. Ping an address</a>
</li>
<li><a href="action-ssh.html">6.4. SSH into another machine and run a command</a>
</li>
<li><a href="powershell.html">6.5. Powershell</a>
</li>
</ul>
</li>
<li><a href="args.html">7. Arguments</a>
</li>
<li><a href="auth.html">8. Authentication &amp; Authorization</a>
</li>
<li><a href="_reference.html">9. Reference</a>
</li>
<li><a href="troubleshooting.html">10. Support &amp; Troubleshooting</a>
</li>
<li><a href="api.html">11. API</a>
</li>
</ul>
</div>
</div>
<div id="content">
<div class="sect2">
<h3 id="action-container-control"><a class="anchor" href="#action-container-control"></a><a class="link" href="#action-container-control">6.1. Containers - start/stop</a></h3>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 20%;">
<col style="width: 80%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Installation type</th>
<th class="tableblock halign-left valign-top">Difficulty to do this</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Running as a <strong>Systemd service</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Easy</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Running in a <strong>container</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Setup needed - see below</p></td>
</tr>
</tbody>
</table>
<div class="sect3">
<h4 id="_example_config_yaml"><a class="anchor" href="#_example_config_yaml"></a><a class="link" href="#_example_config_yaml">6.1.1. Example config.yaml</a></h4>
<div id="example-control-containers" class="literalblock">
<div class="content">
<pre>actions:
  - title: Stop Plex
    shell: docker stop plex

  - title: Start plex
    shell: docker start plex</pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_setup_if_running_inside_a_container"><a class="anchor" href="#_setup_if_running_inside_a_container"></a><a class="link" href="#_setup_if_running_inside_a_container">6.1.2. Setup if running inside a container</a></h4>
<div class="paragraph">
<p>You can control other containers, when running OliveTin inside a container
itself, however you need to do some extra setup when creating the OliveTin
container.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
If you want to control Docker from inside a Docker container, you will need to also create the container with <code>--privileged</code>. Podman does not have this requirement. If you are getting "permission denied" errors it is probably because OliveTin runs as user UID 1000 by default, which is not allowed by your docker host. Simply run OliveTin with <code>--user root</code> as a simple workround. Note that <a href="no-puid-pgid.html">PUID and PGID variables will not work</a>.
</td>
</tr>
</table>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Pass <code>/var/run/docker.sock</code> as a bind mount to the container when creating it, eg:</p>
<div class="listingblock">
<div class="content">
<pre>docker create --privileged --user root -v /var/run/docker.sock:/var/run/docker.sock ...additional args here...</pre>
</div>
</div>
<div class="paragraph">
<p>Or, using the <code>docker run</code> syntax;</p>
</div>
<div class="listingblock">
<div class="content">
<pre>docker run --privileged --user root -v /var/run/docker.sock:/var/run/docker.sock --name OliveTin jamesread/olivetin</pre>
</div>
</div>
</li>
<li>
<p>The official x86_64 docker container comes with the <code>docker</code> client pre-installed. If you are using <code>arm</code> or and <code>arm64</code> container, you will need to add Docker yourself.</p>
<div class="paragraph">
<p><a href="container-dnf.html">How to install additional packages in the container</a></p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
The reason that the <code>arm</code> and <code>arm64</code> containers do not container docker, is that when these images are cross-compiled at build time, it takes FOREVER because we have to emulate arm.
</td>
</tr>
</table>
</div>
</li>
</ol>
</div>
<div class="paragraph">
<p>After you have passed the socket into the container (and optionally installed docker), you should be able to setup docker actions like it&#8217;s shown in the example <a href="action-container-control.html#example-control-containers">above</a>.</p>
</div>
</div>
</div>
<div class="paragraph nav-footer">
<p>↑ Up: <a href="examples.html">Action examples</a> | ⌂ Home: <a href="index.html">OliveTin documentation</a> | Next: <a href="action-service.html">Restart a systemd service</a> →</p>
</div>
</div>
<div id="footer">
<div id="footer-text">
Last updated 2024-02-21 15:55:23 UTC
</div>
</div>
</body>
</html>